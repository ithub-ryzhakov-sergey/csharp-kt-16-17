# Example.Finalizers

- **Кратко:** как работает финализация, почему она недетерминированна и когда её использовать.

## Теория
- **Очередь финализации:** объекты с финализатором попадают в специальную очередь; перед удалением их финализаторы вызываются в отдельном потоке.
- **Finalization-Reachable:** объект переносится во «вторую» структуру и окончательно удаляется в одном из следующих проходов GC (обычно требуется минимум два прохода).
- **Недетерминированность:** порядок и момент вызова финализаторов не гарантируются.
- **Когда нужен финализатор:** только для освобождения НЕуправляемых ресурсов, если отсутствуют иные механизмы (рекомендуется `SafeHandle`/`IDisposable`).

## Что делает пример
1. Создаёт несколько объектов с финализатором.
2. Вызывает `GC.Collect()` и `GC.WaitForPendingFinalizers()`.
3. Печатает сообщения из финализаторов (порядок может отличаться).

## Как интерпретировать вывод
- Вы увидите вызовы `~Finalize` в произвольном порядке и моменте.
- Это демонстрирует, почему бизнес-логику нельзя полагать на финализацию.

## Полезные ссылки
- Finalization, Finalization Queue — официальные материалы .NET.

Запуск:
```
dotnet run
```
