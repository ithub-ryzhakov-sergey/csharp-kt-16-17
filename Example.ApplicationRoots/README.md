# Example.ApplicationRoots

- **Кратко:** как CLR определяет достижимые объекты через «корни» (roots) и почему статические поля удерживают объекты.

## Теория
- **Корни приложения (application roots):** точки, из которых GC начинает граф достижимости. Примеры: статические поля, локальные переменные активных кадров стека, параметры методов, ссылки в регистрах CPU, объекты, ожидающие финализации.
- **Статические поля** — живут, пока жив домен приложения/тип; такие ссылки удерживают объект.
- **Локальные переменные/параметры** — корни, пока выполняется метод и переменная находится «в живом диапазоне» (liveness).
- **WeakReference** — слабая ссылка: не является корнем, позволяет не удерживать объект от сборки.

## Что делает пример
1. Создаёт статический корень, локальную переменную и слабую ссылку на объект.
2. Вызывает `GC.Collect()` и `GC.WaitForPendingFinalizers()`.
3. Демонстрирует, что слабая ссылка может обнулиться (`IsAlive = false`), в то время как объект со статическим корнем выживает до очистки поля.

## Как интерпретировать вывод
- Если `weak.IsAlive` стал `false` — объект собран, так как на него не было сильных ссылок.
- Пока статическое поле указывает на объект, он достижим и не будет собран.
- После присвоения статическому полю `null` объект становится кандидатом на сборку.

## Полезные ссылки
- Руководство: «Garbage Collection — Roots». 
- API: `WeakReference`.

Запуск:
```
dotnet run
```
