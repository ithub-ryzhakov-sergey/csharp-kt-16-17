# Example.GC_API

- **Кратко:** обзор полезных членов `System.GC` и когда они действительно нужны.

## Теория
- **`GetTotalMemory(bool forceFullCollection)`:** оценивает объём памяти, занятый управляемыми объектами. `true` может инициировать сборку перед измерением.
- **`GetGeneration(object)`:** текущая принадлежность объекта поколению.
- **`Collect(int generation, GCCollectionMode mode)`:** принудительная сборка (не рекомендуется в продакшене). `GCCollectionMode.Forced` — немедленно.
- **`WaitForPendingFinalizers()`:** ожидает завершения финализаторов после сборки.
- **`KeepAlive(object)`:** гарантирует, что объект не будет собран до этой точки (важно при взаимодействии с небезопасным кодом/пинами).

## Что делает пример
1. Выводит оценку памяти и поколение для нового объекта.
2. Выполняет `GC.Collect(0, GCCollectionMode.Forced)` и `WaitForPendingFinalizers()`.
3. Вызывает `GC.KeepAlive(o)`, чтобы объект считался живым до этой строки.

## Как интерпретировать вывод
- Это демонстрация API: не используйте `Collect` без крайней необходимости (обычно вредно для производительности).
- `KeepAlive` — инструмент точного контроля «живости» объекта на границе кода (редкие случаи).

## Полезные ссылки
- Справочник по `System.GC` (API Reference).

Запуск:
```
dotnet run
```
